body: "This KB provides some helpful tips on upgrading from v1.2.0 to v1.3.0\r\n\r\
  \n## Safe way: Migrate\r\n\r\nThe recommended upgrade path to move from v1.2 to\
  \ v1.3 is as follows :\r\n1. Install StackStorm v1.3.0 on a brand new instance.\r\
  \n2. Package all your pack from the old v1.2.0 instance and place them under some\
  \ SCM like git (you should have done it long ago).\r\n3. Save your key-value pairs\
  \ from the st2 datastore: `st2 key list -j > kv_file.json`\r\n4. Grab packs from\
  \ the SCM.\r\n5. If the SCM is git then it is possible to use `st2 run packs.install\
  \ packs=<pack-list> repo_url=<repo-url>`\r\n6. Reconfigure all external services\
  \ to point to the new StackStorm instance.\r\n7. Load your keys to the datastore:\
  \ `st2 key load kv_file.json`\r\n9. Back up audit log from v1.2 server found under\
  \ `/var/log/st2/*.audit.log` and move to v1.3 instance. Note that history of old\
  \ executions will be lost but a full audit record is still available in the log\
  \ files that were transferred over.\r\n\r\n## On your own risk: In-place Upgrade.\r\
  \n\r\nStackStorm is complex and while we did the best effort to ensure that the\
  \ basic upgrade works, there are few things that we know may break. Here is the\
  \ procedure:\r\n1. Remove `st2::version` and `st2::revision`, if present, from `/opt/puppet/hieradata/answers.json`\
  \ or `/opt/puppet/hieradata/answers.yaml` depending on which is present on your\
  \ system. Often this step is a no-op on most installations.\r\n2.  Run `update-system`\
  \ and answer `Y` when prompted to overwrite existing version.\r\n3. StackStorm service\
  \ need a restart to pick up new code. Do this by running `st2ctl restart`\r\n4.\
  \ Run [self verification](https://docs.stackstorm.com/troubleshooting/self_verification.html).\r\
  \n5. If self verification passes we are all good. Cleanup the packs installed by\
  \ self verification by running the command `st2 run packs.uninstall packs=examples,\
  \ tests, fixtures, asserts`\r\n6. In case of failures on any of the tests find us\
  \ on [StackStorm community](https://stackstorm.typeform.com/to/K76GRP) on [Slack](https://stackstorm-community.slack.com/)\
  \ and ask about the errors. During 9am-6am PST Mon-Fri you will find a StackStorm\
  \ team member hanging out and answering questions. You can also reach us at support@stackstorm.com\
  \ as an alternative.\r\n\r\nNote: \"Migrate\" is always a backup even if in-place\
  \ upgrade didn't work out for you.\r\n\r\n## Important Notes:\r\nThere is a bug\
  \ in Chatops for v1.3.0.11. The NotificationTrigger is not published and so chatops.post_result\
  \ is not triggered. Run `st2 --version` to check version. The bug is fixed in v1.3.0.12.\r\
  \n\r\nFollow the steps below to update an existing v1.3.0.11.\r\n1. Run `st2ctl\
  \ stop` and `service docker-hubot stop` to stop services\r\n2. Make sure st2::version\
  \ and st2::revision is removed from `/opt/puppet/hieradata/answers.yaml` if the\
  \ file exists.\r\n3. Run `update-system` and answer `Y` when prompted to overwrite\
  \ with 1.3.0.12.\r\n4. When the update completes, start st2ctl and docker-hubot\
  \ services."
title: Upgrade from v1.2 to v1.3
topic: !!python/unicode 'Installation'
